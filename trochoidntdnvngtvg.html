<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äuá»•i HÃ¬nh Báº¯t Chá»¯ - Danh NhÃ¢n Viá»‡t Nam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .slot-active { cursor: pointer; transition: all 0.2s; }
        .slot-active:hover { transform: translateY(-2px); background-color: #fef2f2 !important; border-color: #ef4444 !important; }
        .question-box { background: #fffbeb; border: 3px solid #fcd34d; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .image-card { background: white; border-radius: 1.5rem; box-shadow: inset 0 0 20px rgba(0,0,0,0.05); }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        .animate-shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
    </style>
</head>
<body class="p-4">
    <div id="game-container" class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden border-8 border-yellow-400">
        <!-- Header -->
        <div class="bg-yellow-400 p-4 flex justify-between items-center border-b-4 border-yellow-500">
            <div class="flex items-center space-x-2">
                <span class="text-2xl">â­</span>
                <span id="score" class="font-bold text-xl text-blue-900">0</span>
            </div>
            <h1 class="text-xl font-black text-blue-900 uppercase">Äuá»•i HÃ¬nh Báº¯t Chá»¯</h1>
            <div id="timer" class="font-mono font-bold text-lg bg-white px-3 py-1 rounded-full border-2 border-blue-900">0/0</div>
        </div>

        <div class="p-6">
            <!-- Start Screen -->
            <div id="start-screen" class="text-center py-8">
                <div class="text-6xl mb-4">ğŸ‡»ğŸ‡³</div>
                <h2 class="text-3xl font-bold text-blue-900 mb-2">DANH NHÃ‚N Äáº¤T VIá»†T</h2>
                <p class="text-gray-600 mb-8 italic">NhÃ¬n hÃ¬nh vÃ  gá»£i Ã½ Ä‘á»ƒ Ä‘oÃ¡n tÃªn sá»± nghiá»‡p, sá»± kiá»‡n gáº¯n liá»n vá»›i cÃ¡c báº­c tiá»n nhÃ¢n.</p>
                <button onclick="startGame()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-12 rounded-full text-2xl shadow-xl transform transition hover:scale-105">
                    CHÆ I NGAY
                </button>
            </div>

            <!-- Play Screen -->
            <div id="play-screen" class="hidden">
                <!-- Question Area -->
                <div class="mb-6">
                    <div class="question-box p-4 rounded-2xl text-center">
                        <span class="text-sm font-bold text-yellow-600 block mb-1 uppercase tracking-widest">Gá»£i Ã½ cÃ¢u há»i:</span>
                        <p id="question-text" class="text-lg font-bold text-blue-800 leading-tight"></p>
                    </div>
                </div>

                <!-- Image Area -->
                <div id="image-container" class="image-card p-8 mb-6 flex justify-center items-center min-h-[200px] border-4 border-dashed border-gray-100">
                    <!-- HÃ¬nh áº£nh emoji sáº½ hiá»‡n á»Ÿ Ä‘Ã¢y -->
                </div>

                <!-- Answer Slots -->
                <div id="answer-slots" class="flex flex-wrap justify-center gap-2 mb-8"></div>

                <!-- Keyboard -->
                <div id="keyboard" class="flex flex-wrap justify-center gap-2 mb-8"></div>

                <!-- Controls -->
                <div class="flex justify-between items-center border-t pt-4">
                    <button onclick="resetCurrentAnswer()" class="text-gray-500 font-bold hover:text-red-500 transition">ğŸ”„ XÃ³a háº¿t</button>
                    <button id="teacher-mode-btn" onclick="toggleTeacherMode()" class="bg-blue-50 text-blue-600 px-4 py-2 rounded-lg text-sm font-bold border border-blue-200">ğŸ‘¤ Xem Ä‘Ã¡p Ã¡n</button>
                    <button onclick="skipQuestion()" class="text-gray-500 font-bold hover:text-blue-500 transition">Bá» qua â­ï¸</button>
                </div>

                <!-- Teacher Panel -->
                <div id="teacher-panel" class="hidden mt-4 p-4 bg-green-50 rounded-xl border-2 border-green-200">
                    <p id="teacher-answer" class="text-green-700 font-bold"></p>
                    <p id="teacher-hint" class="text-sm text-green-600 italic"></p>
                </div>
            </div>

            <!-- Finish Screen -->
            <div id="finish-screen" class="hidden text-center py-10">
                <div class="text-6xl mb-4">ğŸ†</div>
                <h2 class="text-3xl font-bold text-blue-900 mb-2">XUáº¤T Sáº®C!</h2>
                <p id="final-score-text" class="text-xl mb-8"></p>
                <button onclick="location.reload()" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg">CHÆ I Láº I</button>
            </div>
        </div>
    </div>

    <script>
        const questionsData = [
            { 
                id: 1, 
                answer: "SÃšNG BAZOOKA", 
                question: "ÄÃ¢y lÃ  loáº¡i vÅ© khÃ­ chá»‘ng tÄƒng nÃ o do GS. Tráº§n Äáº¡i NghÄ©a cháº¿ táº¡o Ä‘á»ƒ Ä‘Ã¡nh quÃ¢n PhÃ¡p?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">â…¢</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ¦</span><span class="text-4xl">+</span><span class="text-7xl">â˜•</span></div>`, 
                explanation: "Giáº£i thÃ­ch: III (Ba) + Sá»Ÿ thÃº (Zoo) + Ca (CÃ¡i ca) -> BA-ZOO-KA." 
            },
            { 
                id: 2, 
                answer: "ÄIá»†N BIÃŠN PHá»¦", 
                question: "Chiáº¿n tháº¯ng 'lá»«ng láº«y nÄƒm chÃ¢u, cháº¥n Ä‘á»™ng Ä‘á»‹a cáº§u' nÃ o gáº¯n liá»n vá»›i tÃªn tuá»•i Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">âš¡</span><span class="text-4xl">+</span><span class="text-7xl">ğŸš§</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ¯</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Äiá»‡n (SÃ©t) + BiÃªn (Ranh giá»›i) + Phá»§ (Phá»§ thÃ nh)." 
            },
            { 
                id: 3, 
                answer: "Tá»”NG KHá»I NGHÄ¨A", 
                question: "GS. Tráº§n VÄƒn GiÃ u Ä‘Ã£ lÃ£nh Ä‘áº¡o nhÃ¢n dÃ¢n Nam Bá»™ thá»±c hiá»‡n sá»± kiá»‡n lá»‹ch sá»­ trá»ng Ä‘áº¡i nÃ o vÃ o thÃ¡ng 8 nÄƒm 1945?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">â•</span><span class="text-4xl">+</span><span class="text-7xl">ğŸŒ¬ï¸</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ¤</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Tá»•ng (Cá»™ng) + Khá»Ÿi (GiÃ³ thá»•i) + NghÄ©a (ÄoÃ n káº¿t)." 
            },
            { 
                id: 4, 
                answer: "TRIáº¾T Há»ŒC", 
                question: "GS. Tráº§n VÄƒn GiÃ u ná»•i tiáº¿ng vá»›i nhá»¯ng cÃ´ng trÃ¬nh nghiÃªn cá»©u vá» lÄ©nh vá»±c khoa há»c xÃ£ há»™i nÃ o?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ§ </span><span class="text-4xl">+</span><span class="text-7xl">ğŸ“</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Triáº¿t (TrÃ­ Ã³c/TÆ° duy) + Há»c (MÅ© cá»­ nhÃ¢n)." 
            },
            { 
                id: 5, 
                answer: "SÃšNG KHÃ”NG GIáº¬T", 
                question: "TÃªn gá»i phá»• biáº¿n cá»§a loáº¡i sÃºng SKZ do Tráº§n Äáº¡i NghÄ©a cháº¿ táº¡o lÃ  gÃ¬?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ”«</span><span class="text-4xl">+</span><span class="text-7xl">âŒ</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ«¨</span></div>`, 
                explanation: "Giáº£i thÃ­ch: SÃºng + KhÃ´ng (X) + Giáº­t (Rung ngÆ°á»i)." 
            },
            { 
                id: 6, 
                answer: "Äáº I TÆ¯á»šNG", 
                question: "Cáº¥p báº­c quÃ¢n hÃ m cao nháº¥t mÃ  Ã´ng VÃµ NguyÃªn GiÃ¡p Ä‘Æ°á»£c phong táº·ng vÃ o nÄƒm 1948 lÃ  gÃ¬?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ˜</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ–ï¸</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Äáº¡i (Voi to) + TÆ°á»›ng (QuÃ¢n hÃ m)." 
            },
            { 
                id: 7, 
                answer: "ANH HÃ™NG LAO Äá»˜NG", 
                question: "Tráº§n Äáº¡i NghÄ©a Ä‘Æ°á»£c NhÃ  nÆ°á»›c phong táº·ng danh hiá»‡u gÃ¬ vÃ¬ nhá»¯ng Ä‘Ã³ng gÃ³p cho khoa há»c quÃ¢n sá»±?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ¦¸</span><span class="text-4xl">+</span><span class="text-7xl">â›ï¸</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ­</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Anh hÃ¹ng + Lao + Äá»™ng (NhÃ  mÃ¡y)." 
            },
            { 
                id: 8, 
                answer: "Lá»ŠCH Sá»¬", 
                question: "NgoÃ i Triáº¿t há»c, GS. Tráº§n VÄƒn GiÃ u cÃ²n lÃ  má»™t báº­c tháº§y trong lÄ©nh vá»±c khoa há»c nÃ o?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ“…</span><span class="text-4xl">+</span><span class="text-7xl">ğŸº</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Lá»‹ch (Tá» lá»‹ch) + Sá»­ (Äá»“ cá»•)." 
            },
            { 
                id: 9, 
                answer: "QUáº¢NG BÃŒNH", 
                question: "Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p sinh ra vÃ  lá»›n lÃªn táº¡i tá»‰nh nÃ o á»Ÿ miá»n Trung?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ“£</span><span class="text-4xl">+</span><span class="text-7xl">âš–ï¸</span></div>`, 
                explanation: "Giáº£i thÃ­ch: Quáº£ng (Loa thÃ´ng bÃ¡o) + BÃ¬nh (CÃ¡i cÃ¢n)." 
            },
            { 
                id: 10, 
                answer: "PHÃP", 
                question: "Quá»‘c gia nÃ o lÃ  nÆ¡i cÃ¡c danh nhÃ¢n nhÆ° Tráº§n Äáº¡i NghÄ©a, Tráº§n VÄƒn GiÃ u tá»«ng há»c táº­p vÃ  nghiÃªn cá»©u?", 
                images: `<div class="flex items-center gap-4"><span class="text-7xl">ğŸ¥–</span><span class="text-4xl">+</span><span class="text-7xl">ğŸ—¼</span></div>`, 
                explanation: "Giáº£i thÃ­ch: BÃ¡nh mÃ¬ + ThÃ¡p Eiffel Ä‘áº·c trÆ°ng cá»§a nÆ°á»›c PhÃ¡p." 
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let currentInput = [];
        let buttonMapping = [];
        let isTeacherMode = false;
        let activeQuestions = [];

        function startGame() {
            activeQuestions = [...questionsData].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            updateScoreUI();
            loadQuestion();
        }

        function loadQuestion() {
            const q = activeQuestions[currentQuestionIndex];
            currentInput = [];
            buttonMapping = [];
            
            document.getElementById('timer').innerText = `${currentQuestionIndex + 1}/${activeQuestions.length}`;
            document.getElementById('question-text').innerText = q.question;
            document.getElementById('image-container').innerHTML = q.images;
            
            const slotsContainer = document.getElementById('answer-slots');
            slotsContainer.innerHTML = '';
            q.answer.split('').forEach((char, idx) => {
                const slot = document.createElement('div');
                if (char === ' ') {
                    slot.className = "w-4";
                    currentInput[idx] = ' ';
                } else {
                    slot.className = "w-9 h-11 border-b-4 border-blue-400 text-xl font-bold flex items-center justify-center text-blue-900 bg-blue-50 rounded-t-lg shadow-sm";
                    slot.id = `slot-${idx}`;
                    slot.onclick = () => removeLetter(idx);
                    currentInput[idx] = null;
                }
                slotsContainer.appendChild(slot);
            });

            setupKeyboard(q.answer);
            updateTeacherPanel(q);
        }

        function setupKeyboard(answer) {
            const kbContainer = document.getElementById('keyboard');
            kbContainer.innerHTML = '';
            let chars = answer.replace(/\s/g, '').split('');
            const alphabet = "AÄ‚Ã‚BCDÄEÃŠGHIKLMNOÃ”Æ PQRSTUÆ¯VXY";
            while (chars.length < 16) {
                const r = alphabet[Math.floor(Math.random() * alphabet.length)];
                if (!chars.includes(r)) chars.push(r);
            }
            chars.sort(() => Math.random() - 0.5);

            chars.forEach((char, btnIdx) => {
                const btn = document.createElement('button');
                btn.id = `kb-btn-${btnIdx}`;
                btn.className = "w-10 h-10 bg-white border-2 border-gray-200 rounded-lg font-bold text-lg shadow hover:bg-yellow-400 hover:border-yellow-500 transition active:scale-90";
                btn.innerText = char;
                btn.onclick = () => addLetter(char, btnIdx);
                kbContainer.appendChild(btn);
            });
        }

        function addLetter(char, btnIdx) {
            const emptyIdx = currentInput.findIndex(v => v === null);
            if (emptyIdx !== -1) {
                currentInput[emptyIdx] = char;
                buttonMapping[emptyIdx] = btnIdx;
                document.getElementById(`kb-btn-${btnIdx}`).classList.add('invisible', 'pointer-events-none');
                updateSlotsUI();
                checkAnswer();
            }
        }

        function removeLetter(slotIdx) {
            if (currentInput[slotIdx] && currentInput[slotIdx] !== ' ') {
                const btnIdx = buttonMapping[slotIdx];
                document.getElementById(`kb-btn-${btnIdx}`).classList.remove('invisible', 'pointer-events-none');
                currentInput[slotIdx] = null;
                updateSlotsUI();
            }
        }

        function updateSlotsUI() {
            currentInput.forEach((char, idx) => {
                const slot = document.getElementById(`slot-${idx}`);
                if (slot) {
                    slot.innerText = char || '';
                    if (char && char !== ' ') slot.classList.add('bg-blue-100', 'slot-active');
                    else slot.classList.remove('bg-blue-100', 'slot-active');
                }
            });
        }

        function checkAnswer() {
            if (!currentInput.includes(null)) {
                const isCorrect = currentInput.join('') === activeQuestions[currentQuestionIndex].answer;
                if (isCorrect) {
                    score += 10;
                    updateScoreUI();
                    document.querySelectorAll('#answer-slots div').forEach(s => {
                        if (s.innerText) s.classList.replace('bg-blue-100', 'bg-green-400');
                    });
                    setTimeout(nextQuestion, 1000);
                } else {
                    document.getElementById('answer-slots').classList.add('animate-shake');
                    setTimeout(() => document.getElementById('answer-slots').classList.remove('animate-shake'), 500);
                }
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < activeQuestions.length) loadQuestion();
            else {
                document.getElementById('play-screen').classList.add('hidden');
                document.getElementById('finish-screen').classList.remove('hidden');
                document.getElementById('final-score-text').innerText = `Báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c ${score} Ä‘iá»ƒm!`;
            }
        }

        function skipQuestion() {
            nextQuestion();
        }

        function resetCurrentAnswer() {
            loadQuestion();
        }

        function updateScoreUI() {
            document.getElementById('score').innerText = score;
        }

        function updateTeacherPanel(q) {
            document.getElementById('teacher-answer').innerText = "ÄÃ¡p Ã¡n: " + q.answer;
            document.getElementById('teacher-hint').innerText = q.explanation;
        }

        function toggleTeacherMode() {
            isTeacherMode = !isTeacherMode;
            document.getElementById('teacher-panel').classList.toggle('hidden');
        }
    </script>
</body>
</html>