<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äuá»•i HÃ¬nh Báº¯t Chá»¯ - Danh NhÃ¢n Viá»‡t Nam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        .card {
            perspective: 1000px;
        }
        .bounce {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        .correct-flash {
            animation: flash 0.5s ease-out;
        }
        @keyframes flash {
            0% { background-color: #48bb78; }
            100% { background-color: white; }
        }
        .celebration {
            position: fixed;
            pointer-events: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 100;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="game-container" class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border-8 border-yellow-400">
        <!-- Header -->
        <div class="bg-yellow-400 p-4 flex justify-between items-center shadow-md">
            <div class="flex items-center space-x-2">
                <span class="text-3xl">ğŸ†</span>
                <span id="score" class="font-bold text-xl text-blue-900">Äiá»ƒm: 0</span>
            </div>
            <h1 class="text-xl md:text-2xl font-black text-blue-900 uppercase tracking-tighter">Äuá»•i HÃ¬nh Báº¯t Chá»¯</h1>
            <div class="flex items-center space-x-2">
                <span id="timer" class="font-mono font-bold text-xl bg-white px-3 py-1 rounded-full border-2 border-blue-900">0/10</span>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="p-6">
            <div id="start-screen" class="text-center py-10">
                <h2 class="text-3xl font-bold text-purple-800 mb-6">Chá»§ Ä‘á»: Ba NhÃ  TrÃ­ Thá»©c & QuÃ¢n Sá»± Lá»—i Láº¡c</h2>
                <p class="text-gray-600 mb-8 px-4 text-lg">Tráº§n Äáº¡i NghÄ©a - VÃµ NguyÃªn GiÃ¡p - Tráº§n VÄƒn GiÃ u</p>
                <button onclick="startGame()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-10 rounded-full text-2xl shadow-lg transform transition hover:scale-110 active:scale-95">
                    Báº®T Äáº¦U CHÆ I!
                </button>
            </div>

            <div id="play-screen" class="hidden">
                <!-- Image Display -->
                <div class="bg-blue-50 border-4 border-dashed border-blue-200 rounded-2xl p-4 mb-6 flex justify-center items-center relative min-h-[300px]" id="image-container">
                    <!-- SVG Images will be injected here -->
                </div>

                <!-- Input Area -->
                <div class="text-center mb-6">
                    <div id="answer-slots" class="flex flex-wrap justify-center gap-2 mb-6">
                        <!-- Slots for letters -->
                    </div>
                    
                    <div id="keyboard" class="flex flex-wrap justify-center gap-2 max-w-lg mx-auto">
                        <!-- Virtual keyboard -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap justify-center gap-4 border-t pt-6">
                    <button onclick="resetCurrentAnswer()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-xl transition">
                        XÃ³a táº¥t cáº£
                    </button>
                    <button id="teacher-mode-btn" onclick="toggleTeacherMode()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 font-bold py-2 px-6 rounded-xl border-2 border-purple-300 transition flex items-center">
                        ğŸ‘¤ Cháº¿ Ä‘á»™ GiÃ¡o viÃªn
                    </button>
                </div>

                <!-- Teacher Panel -->
                <div id="teacher-panel" class="hidden mt-6 p-4 bg-yellow-50 rounded-xl border-2 border-yellow-200">
                    <h3 class="font-bold text-yellow-800 mb-2">ThÃ´ng tin cho GiÃ¡o viÃªn:</h3>
                    <p id="teacher-answer" class="text-lg font-bold text-red-600 mb-2"></p>
                    <p id="teacher-hint" class="text-gray-700 italic"></p>
                </div>
            </div>

            <!-- Finish Screen -->
            <div id="finish-screen" class="hidden text-center py-10">
                <h2 class="text-4xl font-bold text-green-600 mb-4">XUáº¤T Sáº®C!</h2>
                <p id="final-score-text" class="text-2xl mb-8">Báº¡n Ä‘Ã£ hoÃ n thÃ nh 10 cÃ¢u há»i.</p>
                <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg">
                    ChÆ¡i láº¡i tá»« Ä‘áº§u
                </button>
            </div>
        </div>
    </div>

    <!-- Sound Effects Notification (UI) -->
    <div id="sound-toast" class="fixed bottom-4 right-4 bg-black/70 text-white p-2 rounded-lg text-xs">
        Báº¥m báº¥t ká»³ Ä‘Ã¢u Ä‘á»ƒ kÃ­ch hoáº¡t Ã¢m thanh ğŸ”Š
    </div>

    <script>
        // --- DATA ---
        const questionsData = [
            {
                id: 1,
                answer: "SÃšNG SKZ",
                hint: "VÅ© khÃ­ ná»•i tiáº¿ng do Tráº§n Äáº¡i NghÄ©a cháº¿ táº¡o, cÃ³ kháº£ nÄƒng xuyÃªn thá»§ng xe tÄƒng.",
                images: `
                    <svg width="200" height="200" viewBox="0 0 100 100" class="bounce">
                        <rect x="10" y="40" width="60" height="10" fill="#4B5320" />
                        <rect x="70" y="35" width="20" height="20" rx="2" fill="#333" />
                        <circle cx="40" cy="45" r="5" fill="#222" />
                    </svg>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl font-bold bg-white p-4 rounded shadow">S - K - Z</div>
                `,
                explanation: "GiÃ¡o sÆ° Tráº§n Äáº¡i NghÄ©a Ä‘Ã£ nghiÃªn cá»©u cháº¿ táº¡o sÃºng khÃ´ng giáº­t (SKZ) vÃ  Bazooka trong khÃ¡ng chiáº¿n chá»‘ng PhÃ¡p."
            },
            {
                id: 2,
                answer: "ÄIá»†N BIÃŠN PHá»¦",
                hint: "Chiáº¿n tháº¯ng láº«y lá»«ng gáº¯n liá»n vá»›i tÃªn tuá»•i Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p.",
                images: `
                    <div class="text-7xl">âš¡</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸš</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">â›°ï¸</div>
                `,
                explanation: "Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p lÃ  tá»•ng tÆ° lá»‡nh chiáº¿n dá»‹ch Äiá»‡n BiÃªn Phá»§ 'lá»«ng láº«y nÄƒm chÃ¢u, cháº¥n Ä‘á»™ng Ä‘á»‹a cáº§u'."
            },
            {
                id: 3,
                answer: "Ká»¸ SÆ¯ TRÆ¯á»NG",
                hint: "Vá»‹ trÃ­ cao cáº¥p mÃ  Tráº§n Äáº¡i NghÄ©a Ä‘Ã£ tá»« bá» á»Ÿ PhÃ¡p Ä‘á»ƒ theo BÃ¡c Há»“ vá» nÆ°á»›c.",
                images: `
                    <div class="text-7xl">âš™ï¸</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ¤´</div>
                `,
                explanation: "TrÆ°á»›c khi vá» nÆ°á»›c, Tráº§n Äáº¡i NghÄ©a lÃ  ká»¹ sÆ° trÆ°á»Ÿng táº¡i xÆ°á»Ÿng nghiÃªn cá»©u vÅ© khÃ­ cá»§a hÃ£ng hÃ ng khÃ´ng PhÃ¡p."
            },
            {
                id: 4,
                answer: "NHÃ€ Sá»¬ Há»ŒC",
                hint: "LÄ©nh vá»±c nghiÃªn cá»©u uy tÃ­n cá»§a GiÃ¡o sÆ° Tráº§n VÄƒn GiÃ u.",
                images: `
                    <div class="text-7xl">ğŸ </div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ“œ</div>
                `,
                explanation: "Tráº§n VÄƒn GiÃ u khÃ´ng chá»‰ lÃ  nhÃ  cÃ¡ch máº¡ng mÃ  cÃ²n lÃ  má»™t nhÃ  sá»­ há»c, triáº¿t há»c lá»›n cá»§a Viá»‡t Nam."
            },
            {
                id: 5,
                answer: "ANH Cáº¢ QUÃ‚N Äá»˜I",
                hint: "TÃªn gá»i thÃ¢n thÆ°Æ¡ng mÃ  cÃ¡c chiáº¿n sÄ© dÃ nh cho Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p.",
                images: `
                    <div class="text-7xl">ğŸ‘¦</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ–ï¸</div>
                `,
                explanation: "Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p Ä‘Æ°á»£c tÃ´n vinh lÃ  'NgÆ°á»i anh cáº£' cá»§a QuÃ¢n Ä‘á»™i NhÃ¢n dÃ¢n Viá»‡t Nam."
            },
            {
                id: 6,
                answer: "TÆ¯á»šNG NÄ‚M SAO",
                hint: "Cáº¥p báº­c cao nháº¥t mÃ  má»™t quÃ¢n nhÃ¢n Ä‘áº¡t Ä‘Æ°á»£c (VÃ­ dá»¥: Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p).",
                images: `
                    <div class="text-7xl">ğŸ‘®</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="flex">
                        <span>â­</span><span>â­</span><span>â­</span><span>â­</span><span>â­</span>
                    </div>
                `,
                explanation: "VÃµ NguyÃªn GiÃ¡p lÃ  vá»‹ Äáº¡i tÆ°á»›ng Ä‘áº§u tiÃªn cá»§a QuÃ¢n Ä‘á»™i NhÃ¢n dÃ¢n Viá»‡t Nam (Ä‘Æ°á»£c phong nÄƒm 1948)."
            },
            {
                id: 7,
                answer: "CÃ€I MÃŒN",
                hint: "Má»™t trong nhá»¯ng ká»¹ thuáº­t cháº¿ táº¡o vÅ© khÃ­ ná»• ná»•i tiáº¿ng cá»§a Tráº§n Äáº¡i NghÄ©a.",
                images: `
                    <div class="text-7xl">ğŸ‘”</div>
                    <div class="text-4xl text-blue-900 mx-4">(bá» Ä‘uÃ´i 'V')</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ’£</div>
                `,
                explanation: "Ã”ng Ä‘Ã£ sÃ¡ng táº¡o ra cÃ¡c loáº¡i mÃ¬n, lá»±u Ä‘áº¡n phÃ¹ há»£p vá»›i lá»‘i Ä‘Ã¡nh du kÃ­ch cá»§a Viá»‡t Nam."
            },
            {
                id: 8,
                answer: "BÃCH KHOA TOÃ€N THÆ¯",
                hint: "Khá»‘i lÆ°á»£ng kiáº¿n thá»©c khá»•ng lá»“ mÃ  Tráº§n VÄƒn GiÃ u sá»Ÿ há»¯u.",
                images: `
                    <div class="text-7xl">ğŸ’¯</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ“–</div>
                `,
                explanation: "Tráº§n VÄƒn GiÃ u Ä‘Æ°á»£c coi lÃ  má»™t nhÃ  bÃ¡ch khoa toÃ n thÆ° sá»‘ng vá»›i kiáº¿n thá»©c sÃ¢u rá»™ng nhiá»u lÄ©nh vá»±c."
            },
            {
                id: 9,
                answer: "QUáº¢NG BÃŒNH",
                hint: "QuÃª hÆ°Æ¡ng cá»§a Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p.",
                images: `
                    <div class="text-7xl">ğŸŠ</div>
                    <div class="text-4xl text-blue-900 mx-4">('Q' thay 'C')</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">âš–ï¸</div>
                `,
                explanation: "Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p sinh ra táº¡i xÃ£ Lá»™c Thá»§y, huyá»‡n Lá»‡ Thá»§y, tá»‰nh Quáº£ng BÃ¬nh."
            },
            {
                id: 10,
                answer: "ANH HÃ™NG LAO Äá»˜NG",
                hint: "Danh hiá»‡u cao quÃ½ mÃ  Tráº§n Äáº¡i NghÄ©a vÃ  Tráº§n VÄƒn GiÃ u Ä‘á»u nháº­n Ä‘Æ°á»£c.",
                images: `
                    <div class="text-7xl">ğŸ¦¸</div>
                    <div class="text-6xl font-black text-blue-900 mx-4">+</div>
                    <div class="text-7xl">ğŸ‘·</div>
                `,
                explanation: "Cáº£ hai Ã´ng Ä‘á»u cÃ³ nhá»¯ng Ä‘Ã³ng gÃ³p vÄ© Ä‘áº¡i trong cÃ´ng cuá»™c xÃ¢y dá»±ng vÃ  báº£o vá»‡ Ä‘áº¥t nÆ°á»›c."
            }
        ];

        // --- GAME STATE ---
        let currentQuestionIndex = 0;
        let score = 0;
        let currentInput = [];
        let shuffledQuestions = [];
        let isTeacherMode = false;

        // --- AUDIO HELPERS ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const sounds = {
            click: () => playTone(600, 'sine', 0.1),
            correct: () => {
                playTone(523.25, 'sine', 0.1);
                setTimeout(() => playTone(659.25, 'sine', 0.1), 100);
                setTimeout(() => playTone(783.99, 'sine', 0.3), 200);
            },
            wrong: () => {
                playTone(300, 'square', 0.1);
                setTimeout(() => playTone(200, 'square', 0.2), 150);
            },
            finish: () => {
                const notes = [523, 659, 783, 1046];
                notes.forEach((n, i) => setTimeout(() => playTone(n, 'triangle', 0.5), i * 150));
            }
        };

        // --- GAME LOGIC ---
        function startGame() {
            shuffledQuestions = [...questionsData].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            score = 0;
            updateScoreUI();
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            document.getElementById('sound-toast').classList.add('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            const q = shuffledQuestions[currentQuestionIndex];
            currentInput = [];
            
            document.getElementById('timer').innerText = `${currentQuestionIndex + 1}/10`;
            document.getElementById('image-container').innerHTML = q.images;
            
            // Setup Answer Slots (handle spaces)
            const slotsContainer = document.getElementById('answer-slots');
            slotsContainer.innerHTML = '';
            
            q.answer.split('').forEach((char, idx) => {
                const slot = document.createElement('div');
                if (char === ' ') {
                    slot.className = "w-8 h-10"; // Space
                    currentInput[idx] = ' ';
                } else {
                    slot.className = "w-10 h-12 md:w-12 md:h-14 border-b-4 border-blue-500 text-2xl md:text-3xl font-bold flex items-center justify-center text-blue-900 bg-blue-50 rounded-t-lg";
                    slot.id = `slot-${idx}`;
                    currentInput[idx] = null;
                }
                slotsContainer.appendChild(slot);
            });

            // Setup Keyboard
            setupKeyboard(q.answer);

            // Update Teacher Info
            document.getElementById('teacher-answer').innerText = "ÄÃ¡p Ã¡n: " + q.answer;
            document.getElementById('teacher-hint').innerText = q.explanation;
            if (!isTeacherMode) document.getElementById('teacher-panel').classList.add('hidden');
        }

        function setupKeyboard(answer) {
            const kbContainer = document.getElementById('keyboard');
            kbContainer.innerHTML = '';
            
            // Láº¥y cÃ¡c chá»¯ cÃ¡i tá»« Ä‘Ã¡p Ã¡n vÃ  thÃªm chá»¯ ngáº«u nhiÃªn
            let chars = answer.replace(/\s/g, '').split('');
            const alphabet = "AÄ‚Ã‚BCDÄEÃŠGHIKLMNOÃ”Æ PQRSTUÆ¯VXY";
            while (chars.length < 14) {
                const randomChar = alphabet[Math.floor(Math.random() * alphabet.length)];
                if (!chars.includes(randomChar)) chars.push(randomChar);
            }
            chars.sort(() => Math.random() - 0.5);

            chars.forEach(char => {
                const btn = document.createElement('button');
                btn.className = "w-10 h-10 md:w-12 md:h-12 bg-white border-2 border-blue-200 rounded-lg font-bold text-xl shadow-sm hover:bg-blue-500 hover:text-white transition transform active:scale-90";
                btn.innerText = char;
                btn.onclick = () => handleKeyClick(char, btn);
                kbContainer.appendChild(btn);
            });
        }

        function handleKeyClick(char, btn) {
            sounds.click();
            // TÃ¬m Ã´ trá»‘ng Ä‘áº§u tiÃªn
            const emptyIdx = currentInput.findIndex(val => val === null);
            if (emptyIdx !== -1) {
                currentInput[emptyIdx] = char;
                document.getElementById(`slot-${emptyIdx}`).innerText = char;
                btn.style.visibility = 'hidden';
                btn.dataset.targetSlot = emptyIdx;

                checkAnswer();
            }
        }

        function resetCurrentAnswer() {
            sounds.click();
            loadQuestion();
        }

        function checkAnswer() {
            const q = shuffledQuestions[currentQuestionIndex];
            const currentStr = currentInput.join('');
            
            if (!currentInput.includes(null)) {
                if (currentStr === q.answer) {
                    handleCorrect();
                } else {
                    handleWrong();
                }
            }
        }

        function handleCorrect() {
            sounds.correct();
            score += 10;
            updateScoreUI();
            
            document.getElementById('image-container').classList.add('correct-flash');
            
            setTimeout(() => {
                document.getElementById('image-container').classList.remove('correct-flash');
                nextQuestion();
            }, 1000);
        }

        function handleWrong() {
            sounds.wrong();
            const slots = document.getElementById('answer-slots').children;
            for (let slot of slots) {
                if (slot.innerText) slot.classList.add('text-red-500');
            }
            
            setTimeout(() => {
                resetCurrentAnswer();
            }, 800);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showFinish();
            }
        }

        function showFinish() {
            sounds.finish();
            document.getElementById('play-screen').classList.add('hidden');
            document.getElementById('finish-screen').classList.remove('hidden');
            document.getElementById('final-score-text').innerText = `ChÃºc má»«ng báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c ${score} Ä‘iá»ƒm!`;
        }

        function updateScoreUI() {
            document.getElementById('score').innerText = `Äiá»ƒm: ${score}`;
        }

        function toggleTeacherMode() {
            isTeacherMode = !isTeacherMode;
            const panel = document.getElementById('teacher-panel');
            const btn = document.getElementById('teacher-mode-btn');
            
            if (isTeacherMode) {
                panel.classList.remove('hidden');
                btn.classList.add('bg-purple-500', 'text-white');
            } else {
                panel.classList.add('hidden');
                btn.classList.remove('bg-purple-500', 'text-white');
            }
        }

        // KÃ­ch hoáº¡t Audio Context khi tÆ°Æ¡ng tÃ¡c láº§n Ä‘áº§u
        window.onclick = () => {
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        };
    </script>
</body>
</html>