<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√¥n t·∫≠p cu·ªëi k√¨ 1 Tin 7</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');

        :root {
            --primary-color: #0084ff;
            --secondary-color: #e0f2fe;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --error-color: #ef4444;
            --text-color: #334155;
            --bg-color: #f0f9ff;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 95%;
            max-width: 800px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        h1 { margin: 0; font-size: 1.5rem; }
        h2 { margin: 5px 0 0; font-size: 1rem; font-weight: 400; opacity: 0.9; }

        .screen {
            padding: 30px;
            flex-grow: 1;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-secondary {
            background: #94a3b8;
        }

        .option-card {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.2s;
        }

        .option-card.selected {
            background: var(--secondary-color);
            border-color: var(--primary-color);
        }

        .review-item {
            border: 2px solid #e5e7eb;
            padding: 12px;
            border-radius: 10px;
            background: #f9fafb;
        }

        .answer-wrong {
            color: var(--error-color);
            font-weight: bold;
        }

        .answer-correct {
            color: var(--success-color);
            font-weight: bold;
        }
    </style>
</head>

<body>
<div class="container">

<header>
    <h1>Tr·∫Øc Nghi·ªám Tin H·ªçc 7</h1>
    <h2>Ch·ªß ƒë·ªÅ A, C, D</h2>
</header>

<!-- LOGIN SCREEN -->
<div id="screen-login" class="screen active">

    <label>H·ªç v√† t√™n:</label>
    <input type="text" id="input-name">

    <label>L·ªõp:</label>
    <select id="input-class">
        <option value="" disabled selected>Ch·ªçn l·ªõp</option>
        <option>7.1</option><option>7.2</option><option>7.3</option>
        <option>7.4</option><option>7.5</option><option>7.6</option>
        <option>7.7</option><option>7.8</option><option>7.9</option><option>7.10</option>
    </select>

    <label>S·ªë th·ª© t·ª±:</label>
    <input type="number" id="input-id" min="1" max="55">

    <button class="btn" onclick="startQuiz()" style="margin-top:20px;">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
</div>

<!-- QUIZ SCREEN -->
<div id="screen-quiz" class="screen">

    <div class="question-number">
        C√¢u h·ªèi <span id="q-current">1</span>/30
    </div>

    <div class="timer">‚è± <span id="timer-display">600s</span></div>

    <div id="question-text" style="margin:20px 0; font-weight:700;"></div>

    <div id="options-container" class="options-grid"></div>

    <div style="margin-top:auto; display:flex; justify-content:space-between;">
        <button class="btn btn-secondary" id="btn-prev" onclick="prevQuestion()">Quay l·∫°i</button>
        <button class="btn" id="btn-next" onclick="nextQuestion()">C√¢u ti·∫øp</button>
    </div>
</div>

<!-- RESULT SCREEN -->
<div id="screen-result" class="screen">
    <h2>K·∫øt qu·∫£</h2>

    <div>
        <div style="font-size:20px;">ƒêi·ªÉm s·ªë:</div>
        <div id="score-display" style="font-size:32px; font-weight:700;">0/30</div>
        <div id="score-percent"></div>
    </div>

    <button class="btn" onclick="location.reload()" style="margin-top:20px;">L√†m b√†i m·ªõi</button>

    <button class="btn" id="btn-review" style="margin-top:15px;" onclick="showReview()">Xem l·∫°i c√¢u sai</button>

    <div id="review-panel" style="margin-top:20px; display:none;">
        <h3>C√°c c√¢u b·∫°n tr·∫£ l·ªùi sai</h3>
        <div id="review-content" style="display:flex; flex-direction:column; gap:12px;"></div>
    </div>
</div>

</div>

<script>

/* ============================
   C∆† S·ªû D·ªÆ LI·ªÜU C√ÇU H·ªéI (30 c√¢u random m·ªói l·∫ßn)
============================ */

const rawQuestionsDB = [
    { q:"Thi·∫øt b·ªã n√†o l√† thi·∫øt b·ªã v√†o?", options:["Loa","Chu·ªôt, b√†n ph√≠m","M√†n h√¨nh","M√°y chi·∫øu"], correct:1 },
    { q:"Thi·∫øt b·ªã n√†o l√† thi·∫øt b·ªã ra?", options:["B√†n ph√≠m","Chu·ªôt","Loa","Webcam"], correct:2 },
    { q:"H·ªá ƒëi·ªÅu h√†nh c√≥ ch·ª©c nƒÉng g√¨?", options:["So·∫°n th·∫£o","Qu·∫£n l√≠ m√°y t√≠nh","V·∫Ω","Nghe nh·∫°c"], correct:1 },
    { q:"Tr√¨nh qu·∫£n l√≠ t·ªáp l√†:", options:["Word","Excel","File Explorer","PowerPoint"], correct:2 },
    { q:"T√™n v√† ph·∫ßn m·ªü r·ªông t·ªáp c√°ch nhau b·∫±ng:", options:["D·∫•u ph·∫©y","D·∫•u ch·∫•m","D·∫•u hai ch·∫•m","D·∫•u sao"], correct:1 },
    { q:"M·ªü r·ªông t·ªáp th·ªÉ hi·ªán:", options:["K√≠ch th∆∞·ªõc","Ki·ªÉu t·ªáp","Ng√†y t·∫°o","·ªî ƒëƒ©a"], correct:1 },
    { q:"S·∫Øp x·∫øp t·ªáp h·ª£p l√≠ gi√∫p:", options:["TƒÉng dung l∆∞·ª£ng","D·ªÖ t√¨m","C√†i ph·∫ßn m·ªÅm","TƒÉng t·ªëc"], correct:1 },
    { q:"Ai s√°ng l·∫≠p Facebook?", options:["Bill Gates","Mark Zuckerberg","Steve Jobs","Elon Musk"], correct:1 },
    { q:"Facebook ra ƒë·ªùi nƒÉm n√†o?", options:["2000","2004","2006","2010"], correct:1 },
    { q:"ƒê·ªô tu·ªïi t·ªëi thi·ªÉu d√πng Facebook?", options:["10","12","13","16"], correct:2 },
    { q:"Quy ƒë·ªãnh ƒë·ªô tu·ªïi nh·∫±m:", options:["Gi·ªõi h·∫°n","B·∫£o v·ªá tr·∫ª nh·ªè","TƒÉng l·ª£i nhu·∫≠n","Ki·ªÉm so√°t Internet"], correct:1 },
    { q:"H·ªçc sinh n√™n l√†m g√¨ tr√™n m·∫°ng?", options:["C√£i nhau","T√¥n tr·ªçng","ƒêƒÉng tin sai","Ch·ª≠i b·∫≠y"], correct:1 },
    { q:"Th√¥ng tin kh√¥ng n√™n chia s·∫ª:", options:["·∫¢nh phong c·∫£nh","Th√¥ng tin c√° nh√¢n","S·ªü th√≠ch","Ho·∫°t ƒë·ªông h·ªçc"], correct:1 },
    { q:"H√†nh vi thi·∫øu vƒÉn h√≥a:", options:["Xin l·ªói","Gi·ªØ tr·∫≠t t·ª±","X·∫øp h√†ng","N√≥i t·ª•c"], correct:3 },
    { q:"·ª®ng x·ª≠ c√≥ vƒÉn h√≥a gi√∫p:", options:["N·ªïi ti·∫øng","M√¥i tr∆∞·ªùng l√†nh m·∫°nh","Nhi·ªÅu tranh c√£i","Th·ªÉ hi·ªán c√° t√≠nh"], correct:1 },
    { q:"D·∫•u hi·ªáu l·ª´a ƒë·∫£o:", options:["Cung c·∫•p m·∫≠t kh·∫©u","Tin nh·∫Øn tr∆∞·ªùng","Th√¥ng b√°o l·ªõp","Trang tr∆∞·ªùng"], correct:0 },
    { q:"Khi nh·∫≠n tin nh·∫Øn l·∫°:", options:["Tr·∫£ l·ªùi","Kh√¥ng ph·∫£n h·ªìi","Chia s·∫ª","L√†m theo"], correct:1 },
    { q:"S·ª≠ d·ª•ng m·∫°ng an to√†n c·∫ßn:", options:["C√¥ng khai d·ªØ li·ªáu","Gi·ªØ k√≠n th√¥ng tin","Nhi·ªÅu b·∫°n l·∫°","D√πng nhi·ªÅu t√†i kho·∫£n"], correct:1 },
    { q:"B·ªã b·∫Øt n·∫°t n√™n:", options:["Im l·∫∑ng","Tr·∫£ ƒë≈©a","B√°o ng∆∞·ªùi l·ªõn","Ch·ª≠i l·∫°i"], correct:2 },
    { q:"Tr√°nh r·ªßi ro m·∫°ng gi√∫p:", options:["Gi·∫£i tr√≠","B·∫£o v·ªá b·∫£n th√¢n","TƒÉng t·ªëc","Nhi·ªÅu b·∫°n"], correct:1 },
    { q:"Thi·∫øt b·ªã nh·∫≠p h√¨nh ·∫£nh:", options:["M√°y in","Loa","Webcam","M√°y chi·∫øu"], correct:2 },
    { q:"Thi·∫øt b·ªã kh√¥ng ph·∫£i ƒë·∫ßu ra:", options:["B√†n ph√≠m","M√†n h√¨nh","M√°y in","Loa"], correct:0 },
    { q:"H·ªá ƒëi·ªÅu h√†nh l√†m g√¨?", options:["Ch∆°i game","Qu·∫£n l√≠ thi·∫øt b·ªã","ƒê·ªì h·ªça","Nghe nh·∫°c"], correct:1 },
    { q:"Th∆∞ m·ª•c d√πng ƒë·ªÉ:", options:["Ghi nh·ªõ app","Ch·ª©a t·ªáp","X·ª≠ l√≠ d·ªØ li·ªáu","B·∫£o m·∫≠t"], correct:1 },
    { q:"T√™n t·ªáp d√πng ƒë·ªÉ:", options:["Gi·∫£m dung l∆∞·ª£ng","Ph√¢n bi·ªát t·ªáp","TƒÉng t·ªëc","B·∫£o v·ªá"], correct:1 },
    { q:"Kh√¥ng n√™n ƒë·ªïi ph·∫ßn n√†o c·ªßa t√™n t·ªáp?", options:["T√™n","Ph·∫ßn m·ªü r·ªông","Th∆∞ m·ª•c","·ªî ƒëƒ©a"], correct:1 },
    { q:"ƒê·∫∑t t√™n r√µ r√†ng gi√∫p:", options:["TƒÉng dung l∆∞·ª£ng","D·ªÖ nh·∫≠n bi·∫øt","Gi·∫£m l·ªói","Nhanh m√°y"], correct:1 },
    { q:"Facebook cho ph√©p:", options:["K·∫øt n·ªëi","So·∫°n th·∫£o","C√†i ƒë·∫∑t","L·∫≠p tr√¨nh"], correct:0 },
    { q:"Facebook ban ƒë·∫ßu ƒë·ªÉ:", options:["B√°n h√†ng","K·∫øt n·ªëi sinh vi√™n","Ch∆°i game","Xem phim"], correct:1 },
    { q:"Nguy c∆° tr·∫ª d∆∞·ªõi 13 tu·ªïi:", options:["Kh√¥ng b·∫£o v·ªá","Kh√¥ng d√πng","Ch·∫≠m m√°y","L·ªói app"], correct:0 },

    { q:"Khi tham gia nh√≥m chat, h·ªçc sinh n√™n:", options:["Spam tin nh·∫Øn","T√¥n tr·ªçng m·ªçi ng∆∞·ªùi","G·ª≠i link l·∫°","Ch·ª≠i b·∫≠y"], correct:1 },
    { q:"H√†nh ƒë·ªông n√†o l√† ·ª©ng x·ª≠ c√≥ vƒÉn h√≥a?", options:["L·∫Øng nghe, ph·∫£n h·ªìi l·ªãch s·ª±","C√£i nhau ƒë·∫øn c√πng","Ch·∫ø gi·ªÖu b·∫°n","ƒêƒÉng ·∫£nh ch·∫ø x√∫c ph·∫°m"], correct:0 },
    { q:"Khi kh√¥ng ƒë·ªìng √Ω √Ω ki·∫øn ai ƒë√≥, ta n√™n:", options:["C√¥ng k√≠ch c√° nh√¢n","Gi·ªØ b√¨nh tƒ©nh v√† g√≥p √Ω","G·ªçi b·∫°n b√® v√†o ch·ª≠i","ƒêƒÉng b√†i b√™u x·∫•u"], correct:1 },
    { q:"ƒê·ªÉ tr√°nh r·ªßi ro khi giao ti·∫øp qua m·∫°ng, HS n√™n:", options:["K·∫øt b·∫°n v·ªõi ng∆∞·ªùi l·∫°","Chia s·∫ª th√¥ng tin ri√™ng t∆∞","X√°c minh ngu·ªìn g·ª≠i","L√†m theo m·ªçi y√™u c·∫ßu"], correct:2 },
    { q:"N·∫øu th·∫•y n·ªôi dung ƒë·ªôc h·∫°i, ta n√™n:", options:["Chia s·∫ª cho vui","B√°o x·∫•u n·ªôi dung","B√¨nh lu·∫≠n khi√™u kh√≠ch","L∆∞u l·∫°i ƒëƒÉng ti·∫øp"], correct:1 },
    { q:"Khi b·ªã ng∆∞·ªùi kh√°c x√∫c ph·∫°m tr√™n m·∫°ng, ta n√™n:", options:["Tr·∫£ ƒë≈©a ngay","G·ª≠i l·ªùi l·∫Ω th√¥ t·ª•c","B·ªè qua v√† b√°o ng∆∞·ªùi l·ªõn","ƒêƒÉng b√†i ƒë√°p tr·∫£"], correct:2 },
    { q:"H·ªçc sinh c·∫ßn l√†m g√¨ ƒë·ªÉ b·∫£o v·ªá t√†i kho·∫£n?", options:["Ti·∫øt l·ªô m·∫≠t kh·∫©u","D√πng m·∫≠t kh·∫©u m·∫°nh","D√πng chung t√†i kho·∫£n","ƒêƒÉng nh·∫≠p tr√™n m·ªçi thi·∫øt b·ªã l·∫°"], correct:1 },
    { q:"Th√¥ng tin n√™n ki·ªÉm tra tr∆∞·ªõc khi chia s·∫ª:", options:["Tin gi·∫≠t g√¢n, ch∆∞a x√°c th·ª±c","Ngu·ªìn uy t√≠n, ch√≠nh x√°c","Tin ƒë·ªìn tr√™n m·∫°ng","·∫¢nh ch·∫ø"], correct:1 },
    { q:"M·ªôt bi·ªÉu hi·ªán ·ª©ng x·ª≠ thi·∫øu vƒÉn minh l√†:", options:["T√¥n tr·ªçng ng∆∞·ªùi kh√°c","Hi·ªÉu sai v√† xin l·ªói","Ch·ª≠i b·ªõi, x√∫c ph·∫°m","Bi·∫øt l·∫Øng nghe"], correct:2 },
    { q:"ƒê·ªÉ tr√°nh b·ªã l·ª´a ƒë·∫£o qua m·∫°ng, ta n√™n:", options:["Nh·∫•p m·ªçi ƒë∆∞·ªùng link","Tin ph·∫ßn th∆∞·ªüng ·∫£o","Kh√¥ng cung c·∫•p m√£ OTP","G·ª≠i m·∫≠t kh·∫©u n·∫øu ƒë∆∞·ª£c y√™u c·∫ßu"], correct:2 }
];

/* ============================
   CODE CH·∫†Y B√ÄI TEST
============================ */

function shuffleArray(arr){
    for(let i=arr.length-1;i>0;i--){
        let j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
    }
}

function prepareQuizData() {
    let arr = JSON.parse(JSON.stringify(rawQuestionsDB));

    arr.forEach(q=>{
        q.cleanOptions=[...q.options];
        q.newCorrectIndex=q.correct;
    });

    shuffleArray(arr);
    return arr.slice(0,30);
}

let sessionQuestions=[];
let currentQuestion=0;
let userAnswers=new Array(30).fill(null);
let timerInterval;
let timeLeft=600;

const screens={
    login:document.getElementById("screen-login"),
    quiz:document.getElementById("screen-quiz"),
    result:document.getElementById("screen-result")
};

function startQuiz(){
    screens.login.style.display="none";
    screens.quiz.style.display="flex";

    sessionQuestions=prepareQuizData();
    renderQuestion();
    startTimer();
}

function startTimer(){
    timerInterval=setInterval(()=>{
        timeLeft--;
        document.getElementById("timer-display").textContent=timeLeft+"s";
        if(timeLeft<=0) submitQuiz();
    },1000);
}

function renderQuestion(){
    let q=sessionQuestions[currentQuestion];

    document.getElementById("q-current").textContent=currentQuestion+1;
    document.getElementById("question-text").textContent=q.q;

    let cont=document.getElementById("options-container");
    cont.innerHTML="";

    q.cleanOptions.forEach((opt,idx)=>{
        let div=document.createElement("div");
        div.className="option-card";
        div.textContent=String.fromCharCode(65+idx)+". "+opt;

        if(userAnswers[currentQuestion]===idx)
            div.classList.add("selected");

        div.onclick=()=>selectOption(idx);
        cont.appendChild(div);
    });

    document.getElementById("btn-prev").style.display=currentQuestion>0?"block":"none";
    document.getElementById("btn-next").textContent=currentQuestion===29?"N·ªôp b√†i":"C√¢u ti·∫øp";
}

function selectOption(idx){
    userAnswers[currentQuestion]=idx;
    renderQuestion();
}

function nextQuestion(){
    if(currentQuestion===29) return submitQuiz();
    currentQuestion++;
    renderQuestion();
}

function prevQuestion(){
    currentQuestion--;
    renderQuestion();
}

function submitQuiz(){
    clearInterval(timerInterval);

    let correct=0;
    sessionQuestions.forEach((q,i)=>{
        if(userAnswers[i]===q.newCorrectIndex) correct++;
    });

    screens.quiz.style.display="none";
    screens.result.style.display="flex";

    document.getElementById("score-display").textContent=`${correct}/30`;
    document.getElementById("score-percent").textContent=Math.round(correct/30*100)+"%";
}

/* ============================
   T√çNH NƒÇNG XEM L·∫†I C√ÇU SAI
============================ */

function showReview(){
    let box=document.getElementById("review-panel");
    let area=document.getElementById("review-content");

    box.style.display="block";
    area.innerHTML="";

    sessionQuestions.forEach((q,i)=>{
        let user=userAnswers[i];
        let correct=q.newCorrectIndex;

        if(user!==correct){
            let div=document.createElement("div");
            div.className="review-item";

            div.innerHTML=`
                <div><strong>C√¢u ${i+1}:</strong> ${q.q}</div>
                <div>‚Ä¢ B·∫°n ch·ªçn: <span class="answer-wrong">${q.cleanOptions[user] ?? "Kh√¥ng ch·ªçn"}</span></div>
                <div>‚Ä¢ ƒê√°p √°n ƒë√∫ng: <span class="answer-correct">${q.cleanOptions[correct]}</span></div>
            `;

            area.appendChild(div);
        }
    });

    if(area.innerHTML.trim()===""){
        area.innerHTML=`<div style="color:green; font-weight:700;">Tuy·ªát v·ªùi! B·∫°n kh√¥ng sai c√¢u n√†o üéâ</div>`;
    }

    setTimeout(()=>box.scrollIntoView({behavior:"smooth"}),200);
}

</script>

</body>
</html>
