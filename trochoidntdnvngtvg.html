<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äuá»•i HÃ¬nh Báº¯t Chá»¯ - Danh NhÃ¢n Viá»‡t Nam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        .bounce {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        .correct-flash {
            animation: flash 0.5s ease-out;
        }
        @keyframes flash {
            0% { background-color: #48bb78; }
            100% { background-color: white; }
        }
        .hint-text {
            animation: fadeInDown 0.5s ease-out;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="game-container" class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border-8 border-yellow-400">
        <!-- Header -->
        <div class="bg-yellow-400 p-4 flex justify-between items-center shadow-md">
            <div class="flex items-center space-x-2">
                <span class="text-3xl">ğŸ†</span>
                <span id="score" class="font-bold text-xl text-blue-900">Äiá»ƒm: 0</span>
            </div>
            <h1 class="text-xl md:text-2xl font-black text-blue-900 uppercase tracking-tighter">Äuá»•i HÃ¬nh Báº¯t Chá»¯</h1>
            <div class="flex items-center space-x-2">
                <span id="timer" class="font-mono font-bold text-xl bg-white px-3 py-1 rounded-full border-2 border-blue-900">0/10</span>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="p-6">
            <div id="start-screen" class="text-center py-10">
                <h2 class="text-3xl font-bold text-purple-800 mb-6">Chá»§ Ä‘á»: Ba NhÃ  TrÃ­ Thá»©c & QuÃ¢n Sá»± Lá»—i Láº¡c</h2>
                <div class="flex justify-center gap-4 mb-8">
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">VÃµ NguyÃªn GiÃ¡p</span>
                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold">Tráº§n Äáº¡i NghÄ©a</span>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-bold">Tráº§n VÄƒn GiÃ u</span>
                </div>
                <button onclick="startGame()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-10 rounded-full text-2xl shadow-lg transform transition hover:scale-110 active:scale-95">
                    Báº®T Äáº¦U CHÆ I!
                </button>
            </div>

            <div id="play-screen" class="hidden">
                <!-- Hint Section -->
                <div class="mb-4 text-center">
                    <button id="hint-btn" onclick="showHint()" class="bg-orange-100 hover:bg-orange-200 text-orange-700 font-bold py-1 px-4 rounded-full border border-orange-300 text-sm transition flex items-center mx-auto">
                        ğŸ’¡ Xem gá»£i Ã½
                    </button>
                    <div id="hint-display" class="hidden hint-text mt-2 p-2 bg-orange-50 text-orange-800 rounded-lg italic text-sm border border-orange-100">
                    </div>
                </div>

                <!-- Image Display -->
                <div class="bg-blue-50 border-4 border-dashed border-blue-200 rounded-2xl p-4 mb-6 flex justify-center items-center relative min-h-[250px]" id="image-container">
                    <!-- SVG/Emoji Content -->
                </div>

                <!-- Input Area -->
                <div class="text-center mb-6">
                    <div id="answer-slots" class="flex flex-wrap justify-center gap-2 mb-6">
                        <!-- Slots for letters -->
                    </div>
                    
                    <div id="keyboard" class="flex flex-wrap justify-center gap-2 max-w-lg mx-auto">
                        <!-- Virtual keyboard -->
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap justify-center gap-4 border-t pt-6">
                    <button onclick="resetCurrentAnswer()" class="bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-2 px-6 rounded-xl transition text-sm">
                        XÃ³a táº¥t cáº£
                    </button>
                    <button id="teacher-mode-btn" onclick="toggleTeacherMode()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 font-bold py-2 px-6 rounded-xl border-2 border-purple-300 transition text-sm flex items-center">
                        ğŸ‘¤ Cháº¿ Ä‘á»™ GiÃ¡o viÃªn
                    </button>
                </div>

                <!-- Teacher Panel -->
                <div id="teacher-panel" class="hidden mt-6 p-4 bg-yellow-50 rounded-xl border-2 border-yellow-200">
                    <h3 class="font-bold text-yellow-800 mb-2">DÃ nh cho GiÃ¡o viÃªn:</h3>
                    <p id="teacher-answer" class="text-xl font-bold text-red-600 mb-2"></p>
                    <p id="teacher-hint" class="text-gray-700 leading-relaxed"></p>
                </div>
            </div>

            <!-- Finish Screen -->
            <div id="finish-screen" class="hidden text-center py-10">
                <h2 class="text-4xl font-bold text-green-600 mb-4">TUYá»†T Vá»œI!</h2>
                <p id="final-score-text" class="text-2xl mb-8 font-semibold"></p>
                <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition transform hover:scale-105">
                    ChÆ¡i láº¡i tá»« Ä‘áº§u
                </div>
            </div>
        </div>
    </div>

    <div id="sound-toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-full text-xs animate-pulse pointer-events-none">
        Nháº¥n vÃ o mÃ n hÃ¬nh Ä‘á»ƒ báº­t Ã¢m thanh ğŸ”Š
    </div>

    <script>
        const questionsData = [
            {
                id: 1,
                answer: "SÃšNG SKZ",
                hint: "ÄÃ¢y lÃ  loáº¡i vÅ© khÃ­ 'khÃ´ng giáº­t' dÃ¹ng Ä‘á»ƒ báº¯n xuyÃªn thá»§ng xe tÄƒng quÃ¢n PhÃ¡p.",
                images: `
                    <div class="flex items-center gap-4">
                        <svg width="120" height="80" viewBox="0 0 100 100" class="bounce">
                            <rect x="10" y="45" width="70" height="10" fill="#4B5320" />
                            <rect x="80" y="40" width="10" height="20" fill="#333" />
                            <circle cx="30" cy="55" r="4" fill="#222" />
                        </svg>
                        <span class="text-5xl font-bold text-blue-900">+</span>
                        <div class="flex flex-col items-center">
                           <span class="text-6xl">ğŸ‡°</span><span class="text-xs font-bold">Bá» ğŸ” </span>
                        </div>
                        <span class="text-5xl font-bold text-blue-900">+</span>
                        <span class="text-6xl font-bold">Z</span>
                    </div>
                `,
                explanation: "GiÃ¡o sÆ° Tráº§n Äáº¡i NghÄ©a Ä‘Ã£ nghiÃªn cá»©u cháº¿ táº¡o sÃºng SKZ (SÃºng khÃ´ng giáº­t) giÃºp quÃ¢n Ä‘á»™i ta tiÃªu diá»‡t xe tÄƒng vÃ  lÃ´ cá»‘t Ä‘á»‹ch."
            },
            {
                id: 2,
                answer: "ÄIá»†N BIÃŠN PHá»¦",
                hint: "TÃªn má»™t thung lÅ©ng á»Ÿ vÃ¹ng TÃ¢y Báº¯c, nÆ¡i diá»…n ra chiáº¿n tháº¯ng 'lá»«ng láº«y nÄƒm chÃ¢u'.",
                images: `
                    <div class="text-7xl">âš¡</div>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ™ï¸</div>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">â›°ï¸</div>
                `,
                explanation: "Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p lÃ  vá»‹ tá»•ng chá»‰ huy tÃ i ba trong chiáº¿n dá»‹ch lá»‹ch sá»­ Äiá»‡n BiÃªn Phá»§ nÄƒm 1954."
            },
            {
                id: 3,
                answer: "ANH Cáº¢ QUÃ‚N Äá»˜I",
                hint: "CÃ¡ch gá»i thá»ƒ hiá»‡n sá»± kÃ­nh trá»ng vÃ  gáº§n gÅ©i Ä‘á»‘i vá»›i Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p.",
                images: `
                    <div class="text-7xl">ğŸ‘¦</div>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ–ï¸</div>
                `,
                explanation: "Äáº¡i tÆ°á»›ng Ä‘Æ°á»£c tÃ´n vinh lÃ  'NgÆ°á»i Anh Cáº£' vÃ¬ Ã´ng lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘áº·t ná»n mÃ³ng cho QuÃ¢n Ä‘á»™i NhÃ¢n dÃ¢n Viá»‡t Nam."
            },
            {
                id: 4,
                answer: "NHÃ€ Sá»¬ Há»ŒC",
                hint: "Nghá» nghiá»‡p cá»§a má»™t ngÆ°á»i chuyÃªn nghiÃªn cá»©u vá» cÃ¡c sá»± kiá»‡n trong quÃ¡ khá»©.",
                images: `
                    <div class="text-7xl">ğŸ </div>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ“œ</div>
                `,
                explanation: "GiÃ¡o sÆ° Tráº§n VÄƒn GiÃ u lÃ  má»™t nhÃ  sá»­ há»c lá»—i láº¡c vá»›i bá»™ tÃ¡c pháº©m 'Lá»‹ch sá»­ chá»‘ng xÃ¢m lÄƒng' ná»•i tiáº¿ng."
            },
            {
                id: 5,
                answer: "VÅ¨ KHÃ",
                hint: "Tráº§n Äáº¡i NghÄ©a Ä‘Æ°á»£c má»‡nh danh lÃ  'Ã”ng vua...' cá»§a Viá»‡t Nam.",
                images: `
                    <div class="text-7xl">ğŸ’ƒ</div>
                    <span class="text-xs font-bold">Thay D báº±ng V</span>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ¬</div>
                    <span class="text-xs font-bold">Bá» dáº¥u sáº¯c</span>
                `,
                explanation: "Ã”ng Ä‘Ã£ dÃ nh cáº£ cuá»™c Ä‘á»i Ä‘á»ƒ nghiÃªn cá»©u cÃ¡c loáº¡i vÅ© khÃ­ hiá»‡n Ä‘áº¡i phá»¥c vá»¥ khÃ¡ng chiáº¿n."
            },
            {
                id: 6,
                answer: "QUáº¢NG BÃŒNH",
                hint: "Tá»‰nh miá»n Trung cÃ³ Ä‘á»™ng Phong Nha, lÃ  quÃª hÆ°Æ¡ng cá»§a Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p.",
                images: `
                    <div class="text-7xl">ğŸŠ</div>
                    <span class="text-xs font-bold">C = Q</span>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">âš–ï¸</div>
                    <span class="text-xs font-bold">Bá» sáº¯c, thÃªm huyá»n</span>
                `,
                explanation: "Äáº¡i tÆ°á»›ng sinh ra táº¡i lÃ ng An XÃ¡, xÃ£ Lá»™c Thá»§y, huyá»‡n Lá»‡ Thá»§y, tá»‰nh Quáº£ng BÃ¬nh."
            },
            {
                id: 7,
                answer: "GIÃO SÆ¯",
                hint: "Há»c hÃ m cao quÃ½ mÃ  cáº£ ba danh nhÃ¢n nÃ y Ä‘á»u Ä‘Æ°á»£c phong táº·ng.",
                images: `
                    <div class="text-7xl">ğŸ¥£</div>
                    <span class="text-xs font-bold">Bá» Ch, thÃªm G</span>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ¥£</div>
                    <span class="text-xs font-bold">Ch = S</span>
                `,
                explanation: "Há» Ä‘á»u lÃ  nhá»¯ng báº­c trÃ­ thá»©c lá»›n, cÃ³ Ä‘Ã³ng gÃ³p to lá»›n cho ná»n giÃ¡o dá»¥c vÃ  khoa há»c Viá»‡t Nam."
            },
            {
                id: 8,
                answer: "HÃ€ Ná»˜I",
                hint: "NÆ¡i cáº£ ba danh nhÃ¢n tá»«ng sá»‘ng, lÃ m viá»‡c vÃ  hiá»‡n nay cÃ³ nhá»¯ng con Ä‘Æ°á»ng mang tÃªn cÃ¡c Ã´ng.",
                images: `
                    <div class="text-7xl">æ²³</div>
                    <span class="text-xs font-bold">(SÃ´ng - Tiáº¿ng HÃ¡n)</span>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ¥£</div>
                `,
                explanation: "Thá»§ Ä‘Ã´ HÃ  Ná»™i lÃ  nÆ¡i lÆ°u giá»¯ nhiá»u ká»· niá»‡m vÃ  di sáº£n cá»§a cÃ¡c danh nhÃ¢n nÃ y."
            },
            {
                id: 9,
                answer: "Ká»¸ SÆ¯",
                hint: "ChuyÃªn mÃ´n ban Ä‘áº§u cá»§a Tráº§n Äáº¡i NghÄ©a trÆ°á»›c khi trá»Ÿ thÃ nh vá»‹ tÆ°á»›ng ngÃ nh quÃ¢n giá»›i.",
                images: `
                    <div class="text-7xl">ğŸ“</div>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">ğŸ•µï¸</div>
                    <span class="text-xs font-bold">Bá» Th, thÃªm S</span>
                `,
                explanation: "Tráº§n Äáº¡i NghÄ©a (Pháº¡m Quang Lá»…) Ä‘Ã£ tá»‘t nghiá»‡p nhiá»u báº±ng ká»¹ sÆ° xuáº¥t sáº¯c táº¡i PhÃ¡p."
            },
            {
                id: 10,
                answer: "CHIáº¾N THáº®NG",
                hint: "Äiá»u mÃ  Äáº¡i tÆ°á»›ng VÃµ NguyÃªn GiÃ¡p luÃ´n hÆ°á»›ng tá»›i trong má»i tráº­n Ä‘Ã¡nh.",
                images: `
                    <div class="text-7xl">ğŸ—¡ï¸</div>
                    <span class="text-xs font-bold">Bá» D, thÃªm Ch</span>
                    <span class="text-4xl text-blue-300 mx-2">+</span>
                    <div class="text-7xl">â˜€ï¸</div>
                    <span class="text-xs font-bold">Bá» r, thÃªm ng</span>
                `,
                explanation: "CÃ¡c chiáº¿n dá»‹ch do cÃ¡c danh nhÃ¢n nÃ y chá»‰ huy hoáº·c Ä‘Ã³ng gÃ³p Ä‘á»u dáº«n Ä‘áº¿n tháº¯ng lá»£i váº» vang cho dÃ¢n tá»™c."
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let currentInput = [];
        let shuffledQuestions = [];
        let isTeacherMode = false;

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playTone(freq, type, duration) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        const sounds = {
            click: () => playTone(600, 'sine', 0.1),
            correct: () => {
                playTone(523.25, 'sine', 0.1);
                setTimeout(() => playTone(659.25, 'sine', 0.1), 100);
                setTimeout(() => playTone(783.99, 'sine', 0.3), 200);
            },
            wrong: () => {
                playTone(300, 'square', 0.1);
                setTimeout(() => playTone(200, 'square', 0.2), 150);
            },
            finish: () => {
                [523, 659, 783, 1046].forEach((n, i) => setTimeout(() => playTone(n, 'triangle', 0.5), i * 150));
            }
        };

        function startGame() {
            shuffledQuestions = [...questionsData].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            score = 0;
            updateScoreUI();
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            document.getElementById('sound-toast').classList.add('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            const q = shuffledQuestions[currentQuestionIndex];
            currentInput = [];
            
            // UI Reset
            document.getElementById('timer').innerText = `${currentQuestionIndex + 1}/10`;
            document.getElementById('image-container').innerHTML = q.images;
            document.getElementById('hint-display').classList.add('hidden');
            document.getElementById('hint-display').innerText = q.hint;
            
            // Slots
            const slotsContainer = document.getElementById('answer-slots');
            slotsContainer.innerHTML = '';
            q.answer.split('').forEach((char, idx) => {
                const slot = document.createElement('div');
                if (char === ' ') {
                    slot.className = "w-6 h-10";
                    currentInput[idx] = ' ';
                } else {
                    slot.className = "w-10 h-12 border-b-4 border-blue-500 text-2xl font-bold flex items-center justify-center text-blue-900 bg-blue-50 rounded-t-lg shadow-inner";
                    slot.id = `slot-${idx}`;
                    currentInput[idx] = null;
                }
                slotsContainer.appendChild(slot);
            });

            setupKeyboard(q.answer);

            // Teacher Data
            document.getElementById('teacher-answer').innerText = "ÄÃ¡p Ã¡n: " + q.answer;
            document.getElementById('teacher-hint').innerText = q.explanation;
            if (!isTeacherMode) document.getElementById('teacher-panel').classList.add('hidden');
        }

        function setupKeyboard(answer) {
            const kbContainer = document.getElementById('keyboard');
            kbContainer.innerHTML = '';
            let chars = answer.replace(/\s/g, '').split('');
            const alphabet = "AÄ‚Ã‚BCDÄEÃŠGHIKLMNOÃ”Æ PQRSTUÆ¯VXY";
            while (chars.length < 14) {
                const randomChar = alphabet[Math.floor(Math.random() * alphabet.length)];
                if (!chars.includes(randomChar)) chars.push(randomChar);
            }
            chars.sort(() => Math.random() - 0.5);

            chars.forEach(char => {
                const btn = document.createElement('button');
                btn.className = "w-10 h-10 bg-white border-2 border-blue-100 rounded-lg font-bold text-xl shadow-sm hover:bg-blue-500 hover:text-white transition transform active:scale-90 flex items-center justify-center";
                btn.innerText = char;
                btn.onclick = () => {
                    sounds.click();
                    const emptyIdx = currentInput.findIndex(val => val === null);
                    if (emptyIdx !== -1) {
                        currentInput[emptyIdx] = char;
                        document.getElementById(`slot-${emptyIdx}`).innerText = char;
                        btn.classList.add('opacity-0', 'pointer-events-none');
                        btn.dataset.targetSlot = emptyIdx;
                        checkAnswer();
                    }
                };
                kbContainer.appendChild(btn);
            });
        }

        function showHint() {
            sounds.click();
            document.getElementById('hint-display').classList.toggle('hidden');
        }

        function checkAnswer() {
            const q = shuffledQuestions[currentQuestionIndex];
            if (!currentInput.includes(null)) {
                if (currentInput.join('') === q.answer) {
                    sounds.correct();
                    score += 10;
                    updateScoreUI();
                    document.getElementById('image-container').classList.add('correct-flash');
                    setTimeout(() => {
                        document.getElementById('image-container').classList.remove('correct-flash');
                        nextQuestion();
                    }, 1000);
                } else {
                    sounds.wrong();
                    document.querySelectorAll('#answer-slots div').forEach(s => {
                        if (s.innerText) s.classList.add('text-red-500');
                    });
                    setTimeout(loadQuestion, 800);
                }
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) loadQuestion();
            else {
                sounds.finish();
                document.getElementById('play-screen').classList.add('hidden');
                document.getElementById('finish-screen').classList.remove('hidden');
                document.getElementById('final-score-text').innerText = `Báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c ${score} Ä‘iá»ƒm!`;
            }
        }

        function resetCurrentAnswer() {
            sounds.click();
            loadQuestion();
        }

        function updateScoreUI() {
            document.getElementById('score').innerText = `Äiá»ƒm: ${score}`;
        }

        function toggleTeacherMode() {
            isTeacherMode = !isTeacherMode;
            document.getElementById('teacher-panel').classList.toggle('hidden');
            document.getElementById('teacher-mode-btn').classList.toggle('bg-purple-500');
            document.getElementById('teacher-mode-btn').classList.toggle('text-white');
        }

        window.onclick = () => { if (audioCtx.state === 'suspended') audioCtx.resume(); };
    </script>
</body>
</html>