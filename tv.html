<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple TV Online</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 90%;
            max-width: 1000px;
            margin-top: 20px;
        }

        .video-wrapper {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            aspect-ratio: 16 / 9;
        }

        video {
            width: 100%;
            height: 100%;
        }

        .channel-list {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
        }

        .channel-item {
            background: #333;
            padding: 15px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid #444;
        }

        .channel-item:hover {
            background: #e74c3c;
            transform: translateY(-3px);
        }

        .active {
            background: #e74c3c !important;
            font-weight: bold;
        }

        h1 { font-size: 24px; color: #e74c3c; }
    </style>
</head>
<body>

<div class="container">
    <h1><span style="color: #fff;">LIVE</span> TV PLAYER</h1>
    
    <div class="video-wrapper">
        <video id="video" controls autoplay></video>
    </div>

    <div class="channel-list" id="playlist">
        </div>
</div>

<script>
    const channels = [
        { name: "HTV7 HD", url: "https://live.fptplay53.net/epzhd1/htv7hd_vhls.smil/chunklist_b5000000.m3u8" },
        { name: "HTV9 HD", url: "https://live.fptplay53.net/epzhd1/htv9hd_vhls.smil/chunklist.m3u8" },
        
        { name: "VTV1", url: "https://live.fptplay53.net/fnxhd1/vtv1hd_vhls.smil/chunklist_b5000000.m3u8" },
        { name: "VTV3", url: "https://live.fptplay53.net/fnxch2/vtv3hd_abr.smil/chunklist_b1000000.m3u8" },
        { name: "HTV1", url: "https://live.fptplay53.net/epzhd2/btv1_hls.smil/chunklist.m3u8" },
        { name: "HTV3", url: "https://live.fptplay53.net/epzhd1/htv3_hls.smil/chunklist.m3u8" },
        { name: "VNToday", url: "hhttps://vtvgolive-ssaimh.vtvdigital.vn/wDsanS82N2dGi2PYM6q98A/1768412272/manifest/vietnamtoday/playlist_720p.m3u8" }
        //https://liveh12.seenow.vn/hls/SCTV4/03.m3u8
    ];

    const video = document.getElementById('video');
    const playlist = document.getElementById('playlist');
    let hls = new Hls();

    function playM3U8(url) {
        if (Hls.isSupported()) {
            hls.destroy(); // Hủy luồng cũ trước khi load luồng mới
            hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function() {
                video.play();
            });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            // Cho Safari (hỗ trợ gốc)
            video.src = url;
            video.addEventListener('loadedmetadata', function() {
                video.play();
            });
        }
    }

    // Khởi tạo danh sách kênh
    channels.forEach((channel, index) => {
        const btn = document.createElement('div');
        btn.className = 'channel-item';
        btn.innerText = channel.name;
        btn.onclick = () => {
            // Xóa class active cũ
            document.querySelectorAll('.channel-item').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');
            playM3U8(channel.url);
        };
        playlist.appendChild(btn);

        // Mặc định chạy kênh đầu tiên
        if(index === 0) {
            btn.classList.add('active');
            playM3U8(channel.url);
        }
    });
</script>

</body>
</html>