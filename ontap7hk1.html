<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ôn tập cuối kì 1 Tin 7</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');

        :root {
            --primary-color: #0084ff;
            --secondary-color: #e0f2fe;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --error-color: #ef4444;
            --text-color: #334155;
            --bg-color: #f0f9ff;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            width: 95%;
            max-width: 800px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        h1 { margin: 0; font-size: 1.5rem; }
        h2 { margin: 5px 0 0; font-size: 1rem; font-weight: 400; opacity: 0.9; }

        .screen {
            padding: 30px;
            flex-grow: 1;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 700; }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #cbd5e1;
            border-radius: 10px;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s;
            background-color: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.1s, background 0.3s;
            display: inline-block;
            text-align: center;
            user-select: none;
        }

        .btn:hover { background: #0066cc; }
        .btn:active { transform: scale(0.98); }
        .btn-secondary { background: #94a3b8; }
        .btn-secondary:hover { background: #64748b; }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-card {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 15px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .option-card:hover {
            border-color: var(--primary-color);
            background: var(--secondary-color);
        }

        .option-card.selected {
            border-color: var(--primary-color);
            background: var(--secondary-color);
            position: relative;
        }

        .option-card.selected::after {
            content: '✓';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
            font-weight: bold;
        }

        .progress-container {
            height: 6px;
            background: #e2e8f0;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--success-color);
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>

<body>

<div class="container">
    <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>

    <header>
        <h1>Trắc Nghiệm Tin Học 7</h1>
        <h2>Chủ đề A, C, D</h2>
    </header>

    <!-- SCREEN LOGIN -->
    <div id="screen-login" class="screen active">
        <div class="form-group">
            <label>Họ và tên học sinh:</label>
            <input type="text" id="input-name">
        </div>

        <div style="display: flex; gap: 20px;">
            <div class="form-group" style="flex: 1;">
                <label>Lớp:</label>
                <select id="input-class">
                    <option value="" disabled selected>Chọn lớp</option>
                    <option value="7.1">7.1</option>
                    <option value="7.2">7.2</option>
                    <option value="7.3">7.3</option>
                    <option value="7.4">7.4</option>
                    <option value="7.5">7.5</option>
                    <option value="7.6">7.6</option>
                    <option value="7.7">7.7</option>
                    <option value="7.8">7.8</option>
                    <option value="7.9">7.9</option>
                    <option value="7.10">7.10</option>
                     <option value="7.11">7.11</option>
                </select>
            </div>

            <div class="form-group" style="flex: 1;">
                <label>STT:</label>
                <input type="number" id="input-id" min="1" max="55">
            </div>
        </div>

        <button class="btn" onclick="startQuiz()" style="width:100%;">Bắt đầu làm bài</button>
    </div>

    <!-- SCREEN QUIZ -->
    <div id="screen-quiz" class="screen">
        <div class="quiz-header">
            <div class="question-number">Câu hỏi <span id="q-current">1</span>/30</div>
            <div class="timer">⏱ <span id="timer-display">600s</span></div>
        </div>

        <div class="question-text" id="question-text">Loading...</div>

        <div class="options-grid" id="options-container"></div>

        <div class="nav-buttons" style="margin-top:auto; display:flex; justify-content:space-between;">
            <button class="btn btn-secondary" id="btn-prev" onclick="prevQuestion()">Quay lại</button>
            <button class="btn" id="btn-next" onclick="nextQuestion()">Câu tiếp</button>
        </div>
    </div>

    <!-- SCREEN RESULT -->
    <div id="screen-result" class="screen">
        <div id="result-info"></div>

        <div class="score-box">
            <div>Điểm số của bạn</div>
            <div class="score-number" id="score-display">0/30</div>
            <div id="score-percent"></div>
        </div>

        <button class="btn" onclick="location.reload()" style="width:100%;">Làm bài mới</button>
    </div>
</div>

<script>
/* ====== NHƯ BẢN CŨ – GIỮ NGUYÊN TOÀN BỘ CODE ====== */
/* Chỉ sửa 1 dòng ở renderQuestion(): đổi option -> option-card */

function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
}

/* (Database giữ nguyên – rút gọn vì dài) */
const rawQuestionsDB = [
    // --- ĐỀ TRẮC NGHIỆM SỐ 1 – TIN HỌC 7 (CÁNH DIỀU) ---
    {
        q: "Thiết bị nào sau đây là thiết bị vào của máy tính?",
        options: ["Loa, tai nghe", "Chuột, bàn phím", "Màn hình, máy in", "Máy chiếu, loa"],
        correct: 1 // Chuột, bàn phím
    },
    {
        q: "Thiết bị nào sau đây là thiết bị ra của máy tính?",
        options: ["Bàn phím", "Chuột", "Loa", "Webcam"],
        correct: 2 // Loa
    },
    {
        q: "Hệ điều hành là phần mềm có chức năng:",
        options: ["Soạn thảo văn bản", "Quản lí và điều khiển máy tính", "Vẽ hình", "Nghe nhạc"],
        correct: 1 // Quản lí và điều khiển máy tính
    },
    {
        q: "Trong Windows, trình quản lí hệ thống tệp là:",
        options: ["Word", "Excel", "File Explorer", "PowerPoint"],
        correct: 2 // File Explorer
    },
    {
        q: "Giữa phần tên và phần mở rộng của tệp được phân cách bởi:",
        options: ["Dấu phẩy", "Dấu chấm", "Dấu hai chấm", "Dấu sao"],
        correct: 1 // Dấu chấm
    },
    {
        q: "Phần mở rộng của tên tệp thường thể hiện:",
        options: ["Thư mục chứa", "Kiểu tệp", "Kích thước", "Ngày tạo"],
        correct: 1 // Kiểu tệp
    },
    {
        q: "Việc sắp xếp tệp hợp lí giúp người dùng:",
        options: ["Tăng dung lượng", "Dễ tìm và quản lí", "Cài phần mềm", "Tăng tốc mạng"],
        correct: 1 // Dễ tìm và quản lí
    },
    {
        q: "Facebook là mạng xã hội do ai sáng lập?",
        options: ["Bill Gates", "Mark Zuckerberg", "Steve Jobs", "Elon Musk"],
        correct: 1 // Mark Zuckerberg
    },
    {
        q: "Facebook được ra đời vào năm nào?",
        options: ["2000", "2004", "2006", "2010"],
        correct: 1 // 2004
    },
    {
        q: "Độ tuổi tối thiểu được phép tạo tài khoản Facebook là:",
        options: ["10 tuổi", "12 tuổi", "13 tuổi", "16 tuổi"],
        correct: 2 // 13 tuổi
    },
    {
        q: "Facebook quy định độ tuổi sử dụng nhằm mục đích:",
        options: ["Giới hạn người dùng", "Giảm nội dung", "Bảo vệ người dùng nhỏ tuổi", "Tăng lợi nhuận"],
        correct: 2 // Bảo vệ người dùng nhỏ tuổi
    },
    {
        q: "Khi tham gia mạng xã hội, học sinh nên:",
        options: ["Tranh cãi", "Tôn trọng người khác", "Đăng tin sai", "Nói tục"],
        correct: 1 // Tôn trọng người khác
    },
    {
        q: "Thông tin nào không nên chia sẻ trên mạng xã hội?",
        options: ["Thông tin cá nhân", "Ảnh phong cảnh", "Sở thích", "Hoạt động học tập"],
        correct: 0 // Thông tin cá nhân
    },
    {
        q: "Hành động nào sau đây là thiếu văn hóa nơi công cộng?",
        options: ["Xin lỗi", "Giữ trật tự", "Xếp hàng", "Nói tục"],
        correct: 3 // Nói tục
    },
    {
        q: "Ứng xử có văn hóa trên mạng giúp:",
        options: ["Nổi tiếng", "Tạo môi trường lành mạnh", "Nhiều tranh luận", "Thể hiện cá tính"],
        correct: 1 // Tạo môi trường lành mạnh
    },
    {
        q: "Dấu hiệu nào cho thấy nguy cơ lừa đảo trên mạng?",
        options: ["Cung cấp mật khẩu", "Tin nhắn báo số tiền hiện tại trong tài khoản", "Thông báo lớp", "Trang trường"],
        correct: 0 // Cung cấp mật khẩu
    },
    {
        q: "Khi nhận tin nhắn đáng ngờ, học sinh nên:",
        options: ["Trả lời ngay lập tức", "Không phản hồi", "Chia sẻ", "Làm theo"],
        correct: 1 // Không phản hồi
    },
    {
        q: "Để sử dụng mạng xã hội an toàn, học sinh cần:",
        options: ["Kết bạn nhiều, lập nhóm để bảo vệ mình", "Giữ kín thông tin riêng tư", "Công khai dữ liệu", "Dùng nhiều tài khoản"],
        correct: 1 // Giữ kín thông tin riêng tư
    },
    {
        q: "Khi bị bắt nạt trên mạng, học sinh nên:",
        options: ["Im lặng không phản hồi", "Trả đũa lại bằng những tin nhắn công kích", "Báo người lớn", "Đăng phản đối"],
        correct: 2 // Báo người lớn
    },
    {
        q: "Việc học cách tránh rủi ro trên mạng giúp học sinh:",
        options: ["Giải trí hơn", "Dùng mạng nhiều", "Bảo vệ bản thân", "Kết bạn nhanh"],
        correct: 2 // Bảo vệ bản thân
    },

    // --- ĐỀ TRẮC NGHIỆM SỐ 2 – TIN HỌC 7 (CÁNH DIỀU) ---
    {
        q: "Thiết bị nào sau đây dùng để nhập hình ảnh vào máy tính?",
        options: ["Máy in", "Loa", "Webcam", "Máy chiếu"],
        correct: 2 // Webcam
    },
    {
        q: "Thiết bị nào sau đây không phải là thiết bị ra của máy tính?",
        options: ["Bàn phím", "Màn hình", "Máy in", "Loa"],
        correct: 0 // Bàn phím
    },
    {
        q: "Một trong các chức năng của hệ điều hành là:",
        options: ["Chơi game mượt", "Quản lí thiết bị", "Thiết kế đồ họa", "Nghe nhạc hay"],
        correct: 1 // Quản lí thiết bị
    },
    {
        q: "Trong hệ điều hành, thư mục là nơi dùng để:",
        options: ["Ghi nhớ những chương trình ưa thích", "Chứa tệp và thư mục", "Xử lí dữ liệu", "Khởi động"],
        correct: 1 // Chứa tệp và thư mục
    },
    {
        q: "Tên tệp trong máy tính dùng để:",
        options: ["Phân biệt các tệp", "Giảm dung lượng", "Tăng tốc máy tính", "Bảo vệ nội dung"],
        correct: 0 // Phân biệt các tệp
    },
    {
        q: "Khi đổi tên tệp, phần nào không nên thay đổi để tránh lỗi?",
        options: ["Tên tệp", "Phần mở rộng", "Vị trí lưu", "Thư mục"],
        correct: 1 // Phần mở rộng
    },
    {
        q: "Việc đặt tên tệp rõ ràng giúp người dùng:",
        options: ["Tăng dung lượng", "Dễ nhận biết", "Giảm lỗi", "Tăng tốc"],
        correct: 1 // Dễ nhận biết
    },
    {
        q: "Facebook là mạng xã hội cho phép người dùng:",
        options: ["Kết nối và chia sẻ", "Soạn thảo văn bản trực tuyến", "Cài phần mềm", "Lập trình"],
        correct: 0 // Kết nối và chia sẻ
    },
    {
        q: "Facebook ban đầu được tạo ra nhằm mục đích:",
        options: ["Bán hàng đa cấp", "Kết nối sinh viên", "Chơi game trực tuyến", "Xem phim miễn phí"],
        correct: 1 // Kết nối sinh viên
    },
    {
        q: "Người dưới 13 tuổi dùng Facebook có nguy cơ:",
        options: ["Không được bảo vệ", "Không dùng mạng", "Chậm máy", "Không tải app"],
        correct: 0 // Không được bảo vệ
    },
    {
        q: "Tuân thủ độ tuổi khi dùng Facebook thể hiện:",
        options: ["Sự nổi tiếng", "Ý thức sử dụng", "Kĩ năng công nghệ", "Mức độ online"],
        correct: 1 // Ý thức sử dụng
    },
    {
        q: "Khi bình luận trên mạng xã hội, học sinh nên:",
        options: ["Gay gắt, thô lỗ", "Lịch sự", "Trêu chọc", "Theo cảm xúc"],
        correct: 1 // Lịch sự
    },
    {
        q: "Hành động nào thể hiện ứng xử có văn hóa trên mạng?",
        options: ["Không bêu xấu hình ảnh của người khác", "Chia sẻ thông tin mang tính chất thêu dệt về một sự kiện", "Không nghiện game", "Gây tranh cãi"],
        correct: 0 // Không bêu xấu hình ảnh của người khác
    },
    {
        q: "Đăng thông tin sai sự thật lên mạng là hành vi sai theo lời khuyên:",
        options: ["Đừng vô tình ăn cắp trên không gian mạng", "Không lan truyền tin giả", "Bắt nạt tiếp tay cho kẻ bắt nạt là vi phạm pháp luật", "Cảnh giác với kẻ dụ dỗ và bắt nạt"],
        correct: 1 // Không lan truyền tin giả
    },
    {
        q: "Ứng xử có văn hóa trên mạng giúp mỗi người:",
        options: ["Trở nên nổi tiếng", "Được tôn trọng", "Nhiều bình luận", "Thể hiện cá tính"],
        correct: 1 // Được tôn trọng
    },
    {
        q: "Một trong những rủi ro khi dùng mạng xã hội là:",
        options: ["Học tốt", "Bị lừa đảo", "Kết nối", "Trao đổi"],
        correct: 1 // Bị lừa đảo
    },
    {
        q: "Để tránh bị lừa đảo trên mạng, học sinh không nên:",
        options: ["Kiểm tra đọc tin nhắn lạ", "Nhấn liên kết lạ", "Báo người lớn", "Cẩn thận"],
        correct: 1 // Nhấn liên kết lạ
    },
    {
        q: "Mật khẩu an toàn trên mạng xã hội cần:",
        options: ["Khó đoán", "Dễ nhớ", "Trùng tên với thầy dạy thêm", "Ít kí tự"],
        correct: 0 // Khó đoán
    },
    {
        q: "Khi phát hiện tài khoản bị xâm nhập, người dùng nên:",
        options: ["Bỏ qua và tạo tài khoản mới", "Đăng cảnh báo", "Đổi mật khẩu", "Tắt thiết bị"],
        correct: 2 // Đổi mật khẩu
    },
    {
        q: "Trang bị kiến thức an toàn thông tin giúp học sinh:",
        options: ["Chơi game không bị thầy la", "Hạn chế rủi ro", "Truy cập nhanh", "Nhiều tài khoản trên mạng xã hội"],
        correct: 1 // Hạn chế rủi ro
    }
];

function prepareQuizData() {
    // Sao chép toàn bộ câu hỏi
    let arr = JSON.parse(JSON.stringify(rawQuestionsDB));

    // Xử lý cleanOptions và newCorrectIndex
    arr.forEach(q => {
        q.cleanOptions = [...q.options];
        q.newCorrectIndex = q.correct;
    });

    // Xáo trộn câu hỏi
    shuffleArray(arr);

    // Lấy đúng 30 câu
    return arr.slice(0, 30);
}


let sessionQuestions = [];
let currentQuestion = 0;
let userAnswers = new Array(30).fill(null);
let timerInterval;
let timeLeft = 600;

const screens = {
    login: document.getElementById("screen-login"),
    quiz: document.getElementById("screen-quiz"),
    result: document.getElementById("screen-result"),
};

const els = {
    name: document.getElementById("input-name"),
    class: document.getElementById("input-class"),
    id: document.getElementById("input-id"),
    timer: document.getElementById("timer-display"),
    qCurrent: document.getElementById("q-current"),
    qText: document.getElementById("question-text"),
    optionsCont: document.getElementById("options-container"),
    progressBar: document.getElementById("progress-bar"),
    scoreDisplay: document.getElementById("score-display"),
    scorePercent: document.getElementById("score-percent"),
    resultInfo: document.getElementById("result-info"),
};

function startQuiz() {
    screens.login.style.display = "none";
    screens.quiz.style.display = "block";

    sessionQuestions = prepareQuizData();
    renderQuestion();
    startTimer();
}

function startTimer() {
    timeLeft = 600;
    timerInterval = setInterval(() => {
        timeLeft--;
        els.timer.textContent = timeLeft + "s";
        if (timeLeft <= 0) submitQuiz();
    }, 1000);
}

function renderQuestion() {
    let q = sessionQuestions[currentQuestion];

    els.qCurrent.textContent = (currentQuestion + 1) + "/30";
    els.qText.textContent = q.q;
    els.optionsCont.innerHTML = "";

    q.cleanOptions.forEach((opt, idx) => {
        let div = document.createElement("div");
        div.className = "option-card";  /* ✔ FIX TẠI ĐÂY */
        div.textContent = String.fromCharCode(65 + idx) + ". " + opt;

        if (userAnswers[currentQuestion] === idx) {
            div.classList.add("selected");
        }

        div.onclick = () => selectOption(idx);
        els.optionsCont.appendChild(div);
    });

    els.progressBar.style.width = ((currentQuestion+1)/30*100) + "%";
    document.getElementById("btn-prev").style.display = currentQuestion > 0 ? "block" : "none";
    document.getElementById("btn-next").textContent = currentQuestion === 29 ? "Nộp bài" : "Câu tiếp";
}

function selectOption(idx) {
    userAnswers[currentQuestion] = idx;
    renderQuestion();
}

function nextQuestion() {
    if (currentQuestion === 29) return submitQuiz();
    currentQuestion++;
    renderQuestion();
}

function prevQuestion() {
    currentQuestion--;
    renderQuestion();
}

function submitQuiz() {
    clearInterval(timerInterval);

    let correct = 0;
    sessionQuestions.forEach((q, i) => {
        if (userAnswers[i] === q.newCorrectIndex) correct++;
    });

    screens.quiz.style.display = "none";
    screens.result.style.display = "block";

    els.scoreDisplay.textContent = correct + "/30";
    els.scorePercent.textContent = Math.round(correct / 30 * 100) + "%";
}
</script>

</body>
</html>
